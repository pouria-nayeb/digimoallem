@page
@model DigiMoallem.Web.Pages.Admin.Groups.IndexModel

@{
    ViewData["Title"] = "گروه و زیرگروه ها";
}

<div class="container">

    <h1 class="my-5">@ViewData["Title"]</h1>

    @if (TempData["Success"] != null)
    {
        <div class="alert alert-success">
            @TempData["Success"]
        </div>
    }

    <a asp-area=""
       asp-page="Create"
       class="btn btn-primary btn-md my-3">
        <i class="fas fa-plus ml-2"></i> افزودن گروه جدید
    </a>

    <div class="table-responsive">
        <table class="table table-bordered text-center">
            <tr>
                <th>نام گروه</th>
                <th>زیرگروه ها</th>
                <th>دستورات</th>
            </tr>
            @foreach (var group in Model.Groups.Where(g => g.ParentId == null))
            {
                <tr>
                    <td>@group.Title</td>
                    <td>
                        @if (group.Groups != null)
                        {
                            @foreach (var subGroup in group.Groups)
                            {
                                <text>@subGroup.Title - <a href="/Admin/Groups/Edit/@subGroup.GroupId" class="btn btn-outline-warning btn-sm"> ویرایش </a> - <a href="/Admin/Groups/Delete/@subGroup.GroupId" class="btn btn-outline-danger btn-sm"> حذف </a>| </text>
                            }
                        }
                    </td>
                    <td>
                        <a href="/Admin/Groups/Edit/@group.GroupId" class="btn btn-outline-warning btn-sm">
                            <i class="fa fa-pen ml-1"></i> ویرایش
                        </a> 
                        | 
                        <a href="/Admin/Groups/Delete/@group.GroupId" class="btn btn-outline-danger btn-sm"> <i class="fa fa-trash ml-1"></i> حذف 
                            </a> | 
                        <a href="/Admin/Groups/Create/@group.GroupId" class="btn btn-outline-success btn-sm"> 
                            <i class="fa fa-plus ml-1"></i> افزودن زیرگروه 
                        </a>
                    </td>
                </tr>
            }

        </table>
    </div>

</div>
