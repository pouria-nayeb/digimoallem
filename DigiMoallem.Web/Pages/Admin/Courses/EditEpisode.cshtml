@page "{id}"
@model DigiMoallem.Web.Pages.Admin.Courses.EditEpisodeModel
@inject ICourseService  _courseService

@{
    ViewData["Title"] = "ویرایش بخش";
}

@section Styles {
    <style>
        .custom-select {
            background-color: #f1f1f1;
            font-family: 'Byekan';
        }

        .custom-control-label::before {
            right: -1.5rem;
        }

        .custom-control-label::after {
            right: -1.5rem;
        }
    </style>
}

<h1 class="my-5"> <i class="fa fa-book ml-2"></i> @ViewData["Title"]</h1>

<!-- breadcrumb -->
<div class="bc-icons-2">

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb dark-bg-admin lighten-5">
            <li class="breadcrumb-item">
                <a class="black-text" href="/Admin/Courses/Episodes/@Model.CourseEpisode.CourseId">لیست بخش ها</a><i class="fas fa-caret-left mx-2"></i>
            </li>
            <li class="breadcrumb-item active">@ViewData["Title"]</li>
        </ol>
    </nav>

</div>

@if (User.Identity.Name == _courseService.GetCourseById(Model.CourseEpisode.CourseId).User.UserName)
{

    <form method="post" enctype="multipart/form-data" class="md-form">

        <input type="hidden" asp-for="CourseEpisode.CourseId" />
        <input type="hidden" asp-for="CourseEpisode.CourseEpisodeId" />
        <input type="hidden" asp-for="CourseEpisode.EpisodeFileName" />

        <div class="container">

            <div asp-validation-summary="All" class="text-danger my-4"></div>

            @if (TempData["WrongInputs"] != null)
            {
                <div class="alert alert-danger">
                    @TempData["WrongInputs"]
                </div>
            }

            @if (TempData["OperationFailed"] != null)
            {
                <div class="alert alert-danger">
                    @TempData["OperationFailed"]
                </div>
            }

            <div class="row">
                <div class="col-12 col-sm-12 col-md-8 col-lg-8">

                    <!-- title -->
                    <div class="md-form mb-4">
                        <input type="text" asp-for="CourseEpisode.Title" class="form-control" />
                        <label asp-for="CourseEpisode.Title"></label>
                    </div>

                    <!-- time -->
                    <div class="md-form mb-4">
                        <input type="text" asp-for="CourseEpisode.EpisodeLength" class="form-control" />
                        <label asp-for="CourseEpisode.EpisodeLength"></label>
                    </div>

                    <!-- is free -->
                    <div class="custom-control custom-checkbox margin-2">
                        <input type="checkbox" class="custom-control-input" asp-for="CourseEpisode.IsFree" />
                        <label class="custom-control-label text-dark" asp-for="CourseEpisode.IsFree">دوره رایگان</label>
                    </div>

                    <div class="form-group my-5">
                        <!-- create -->
                        <button type="submit" class="btn btn-outline-success btn-sm">
                            <i class="fa fa-plus ml-2"></i> ایجاد بخش جدید
                        </button>

                        <!-- back to episodes -->
                        <a asp-area="/Admin/Courses/Episodes"
                           asp-route-id="@Model.CourseEpisode.CourseId" 
                           class="btn btn-outline-warning btn-sm">
                            <i class="fas fa-arrow-right ml-2"></i> بازگشت
                        </a>
                    </div>

                </div>
                <div class="col-12 col-sm-12 col-md-4 col-lg-4">

                    <!-- file demo -->
                    <div class="md-form mb-4">
                        <input type="file" name="fileEpisode" class="form-control" />
                    </div>

                </div>
            </div>

        </div>
    </form>

}